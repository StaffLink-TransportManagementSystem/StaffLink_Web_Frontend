<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Group project UI</title>
  <link rel="stylesheet" href="home_page.css"> 
</head>
<body>

  <div class="container" >
    <div class="X1">
      <table>
        <tr>
          <td class="left">
            <h2>Owner Name</h2>
            <p>
              <h5></h5>NB 1424 | Bus | AC
              <br>Kaluthara&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| 6.00 AM
              <br>University of Colombo&nbsp; &nbsp; &nbsp;| 8.00 AM
              <br> RS. 15000/=
            </p> 
          </td>
          <td class="right" style="width: auto;">
            <img src="20769-4-coach-bus.png" alt="Your Image Description" class="resizable-image">
            <div class="center-button">
              <button>Request</button>
            </div>
          </td>
        </tr>
      </table>
    </div>
    <div></div>
  </div>

  <section></section>

  <script>
    document.addEventListener("DOMContentLoaded", function () {

      function getPayload(token) {
        return JSON.parse(atob(token.split(".")[1]));
    }

    function checkCookie(cName) {
        const name = cName + "=";
        const cDecoded = decodeURIComponent(document.cookie); //to be careful
        const cArr = cDecoded.split("; ");
        let res;
        cArr.forEach((val) => {
            if (val.indexOf(name) === 0) res = val.substring(name.length);
        });
        return res;
    }

    console.log(checkCookie("jwt"))
    const token = checkCookie("jwt");

    if(token == null){
      console.log("No Cookie Found");
      window.location.href = "http://127.0.0.1:5558/Passenger/login-register/index.html";
    }

    const payload = getPayload(token);
    console.log("Payload",payload);

    if (payload.role === "passenger") {
      console.log("Passenger");
    } 
    else if (payload.role === "admin") {
      console.log("Admin");
      window.location.href = "http://127.0.0.1:5558/Admin/dashboard.html";
    }
    else if (payload.role === "owner") {
      console.log("Passenger");
      window.location.href = "http://127.0.0.1:5558/Owner/ownerDashboard.html"
    }
    else if (payload.role === "driver") {
      console.log("Driver");
      window.location.href = "http://127.0.0.1:5558/Driver/dashboard.html";
    }
    else {
      console.log("No Cookie Found");
      window.location.href = "http://127.0.0.1:5558/Passenger/login-register/index.html";
      
    }
    });
  </script>
</body>
</html>
